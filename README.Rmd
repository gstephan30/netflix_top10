---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  echo = FALSE,
  comment = "#>"
)
library(dplyr)
library(readr)
library(purrr)
library(stringr)
library(ggplot2)
library(showtext)

font_add_google("Schoolbell", "bell")
showtext_auto()
theme_set(theme_light(base_size = 20, base_family = "bell"))

# get recent files
recent_files <- list.files("data_raw/", full.names = TRUE) %>% 
  as_tibble() %>% 
  arrange(desc(value)) %>%  
  mutate(cat = basename(value), 
         cat = str_remove(cat, "[0-9]{8}_"),
         cat = str_remove(cat, ".tsv")) %>% 
  slice(1:3)

df <- map(pull(recent_files, value), read_tsv) 
names(df) <- pull(recent_files, cat)

recent_file_meta <- list.files("data/", pattern = "rds", full.names = TRUE) %>% 
  as_tibble() %>% 
  arrange(desc(value)) %>% 
  pull(value)
load(recent_file_meta)

```

# netflix_top10

<!-- badges: start -->
<!-- badges: end -->

The goal of netflix_top10 is to explore the top 10 netflix shows/movies on regularily bases.

```{r}
top_weeks_n <- 2
df$weeks_global %>% 
  filter(show_title %in% pull(slice(top_views_per_week, 1:top_weeks_n), show_title)) %>% 
  ggplot() +
  #geom_line(aes(cumulative_weeks_in_top_10, weekly_hours_viewed, group = season_title), color = "black", size = 1.2, alpha = 0.5) +
  geom_line(aes(cumulative_weeks_in_top_10, weekly_hours_viewed, color = season_title, group = season_title), size = 1.2, alpha = 0.8) +
  labs(title = paste("Top", top_weeks_n, "Movies/Shows"),
       subtitle = paste("Date:", format(Sys.Date(), "%b %d, %Y")),
       x = "Cumulative weeks in top 10",
       y = "Weekly hours viewed",
       color = "Season Title") +
  scale_color_brewer(type = "qual", palette = "Paired") +
  scale_y_continuous(labels = scales::number_format()) +
  scale_x_continuous(labels = scales::number_format(accuracy = 1)) 
```

